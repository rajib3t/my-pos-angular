<!-- Modern Page Header -->
<div class="bg-gradient-to-br from-indigo-50 via-white to-cyan-50 shadow-xl border-b border-indigo-100 px-8 py-8">
  <div class="flex items-center justify-between">
    <div class="flex items-center space-x-6">
      <div class="relative">
        <div class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 p-4 rounded-2xl shadow-xl">
          <lucide-angular [img]="SettingsIcon" [strokeWidth]="1.5" class="h-8 w-8 text-white"></lucide-angular>
        </div>
        <div class="absolute -top-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white animate-pulse"></div>
      </div>
      <div>
        <h1 class="text-3xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent">
          Store Settings
        </h1>
        <p class="text-gray-600 mt-2 text-base font-medium">Configure and customize your store settings with advanced configuration options</p>
        <div class="flex items-center mt-3 space-x-4">
          <span class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 border border-indigo-200">
            <div class="w-2 h-2 bg-indigo-500 rounded-full mr-2 animate-pulse"></div>
            Configuration
          </span>
          <span class="text-gray-400 text-lg">â€¢</span>
          <span class="text-sm text-gray-600 font-medium">Multi-Section Setup</span>
        </div>
      </div>
    </div>
    <div class="hidden md:flex items-center space-x-3">
      <button 
        (click)="router.navigate(['/dashboard'])" 
        class="group bg-white/80 backdrop-blur-sm p-3 rounded-xl shadow-lg border border-gray-200 hover:shadow-xl hover:bg-white transition-all duration-300 cursor-pointer"
        title="Back to Dashboard"
      >
        <lucide-angular [img]="DashboardIcon" [strokeWidth]="1.5" class="h-6 w-6 text-gray-600 group-hover:text-indigo-600 transition-colors"></lucide-angular>
      </button>
    </div>
  </div>
</div>
 <!-- Content Area -->
      <main class="p-8 bg-gradient-to-br from-gray-50 via-indigo-50/30 to-purple-50/30 min-h-screen">
        <div class="max-w-4xl mx-auto">
          <!-- Dynamic Progress Indicator -->
          <div class="mb-8">
            <div class="flex items-center justify-center space-x-4 mb-6">
              <!-- Step 1: Shop Information -->
              <div class="flex items-center">
                <div [class]="getStepClass(1)" class="w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm shadow-lg transition-all duration-500 transform">
                  <svg *ngIf="isStepCompleted(1)" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                  </svg>
                  <span *ngIf="!isStepCompleted(1)" class="text-white">1</span>
                </div>
                <div class="ml-3">
                  <span [class]="getStepTextClass(1)" class="text-sm font-semibold transition-colors duration-300">Shop Info</span>
                  <div class="text-xs text-gray-400 mt-0.5">{{getStepProgress(1)}}% Complete</div>
                </div>
              </div>
              
              <!-- Progress Line 1-2 -->
              <div class="relative w-16 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  class="absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full transition-all duration-700 ease-out"
                  [style.width.%]="getProgressWidth(1, 2)"
                ></div>
              </div>
              
              <!-- Step 2: Address Information -->
              <div class="flex items-center">
                <div [class]="getStepClass(2)" class="w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm shadow-lg transition-all duration-500 transform">
                  <svg *ngIf="isStepCompleted(2)" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                  </svg>
                  <span *ngIf="!isStepCompleted(2)" [class]="isStepActive(2) ? 'text-white' : 'text-gray-500'">2</span>
                </div>
                <div class="ml-3">
                  <span [class]="getStepTextClass(2)" class="text-sm font-semibold transition-colors duration-300">Address</span>
                  <div class="text-xs text-gray-400 mt-0.5">{{getStepProgress(2)}}% Complete</div>
                </div>
              </div>
              
              <!-- Progress Line 2-3 -->
              <div class="relative w-16 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div 
                  class="absolute top-0 left-0 h-full bg-gradient-to-r from-purple-500 to-pink-500 rounded-full transition-all duration-700 ease-out"
                  [style.width.%]="getProgressWidth(2, 3)"
                ></div>
              </div>
              
              <!-- Step 3: Contact & Business -->
              <div class="flex items-center">
                <div [class]="getStepClass(3)" class="w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm shadow-lg transition-all duration-500 transform">
                  <svg *ngIf="isStepCompleted(3)" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                  </svg>
                  <span *ngIf="!isStepCompleted(3)" [class]="isStepActive(3) ? 'text-white' : 'text-gray-500'">3</span>
                </div>
                <div class="ml-3">
                  <span [class]="getStepTextClass(3)" class="text-sm font-semibold transition-colors duration-300">Contact & Business</span>
                  <div class="text-xs text-gray-400 mt-0.5">{{getStepProgress(3)}}% Complete</div>
                </div>
              </div>
            </div>
            
            <!-- Overall Progress Bar -->
            <div class="max-w-md mx-auto">
              <div class="flex justify-between text-xs text-gray-500 mb-2">
                <span>Settings Progress</span>
                <span>{{getOverallProgress()}}% Complete</span>
              </div>
              <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden shadow-inner">
                <div 
                  class="h-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full transition-all duration-1000 ease-out relative overflow-hidden"
                  [style.width.%]="getOverallProgress()"
                >
                  <div class="absolute inset-0 bg-gradient-to-r from-white/30 to-transparent animate-pulse"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Loading Indicator -->
          @if(isLoading) {
            <div class="flex justify-center items-center py-12">
              <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-500"></div>
              <span class="ml-4 text-indigo-600 text-lg">Loading settings...</span>
            </div>
          } @else {
          
          <div class="bg-white/80 backdrop-blur-sm shadow-2xl rounded-3xl overflow-hidden border border-white/50">
            <div class="bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 px-8 py-6 relative overflow-hidden">
              <div class="absolute inset-0 bg-gradient-to-r from-white/10 to-transparent"></div>
              <div class="relative z-10">
                <h3 class="text-2xl font-bold text-white flex items-center">
                   <lucide-angular [img]="SettingsIcon" [strokeWidth]="1.5" class="h-8 w-8 text-white mr-4"></lucide-angular>
                  Settings Configuration
                </h3>
                <p class="text-indigo-100 text-base mt-2 font-medium">Configure your shop settings with comprehensive details and business preferences</p>
              </div>
              <!-- Decorative elements -->
              <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
              <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
            </div>
            
            <div class="p-10">
              <!-- Modern Alert Messages -->
              @if(errorMessage) {
                <div class="mb-8 p-5 bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-400 text-red-800 rounded-2xl flex items-start shadow-lg animate-in slide-in-from-top-2 duration-300">
                  <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center">
                      <svg class="w-5 h-5 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-semibold text-red-800">Error Occurred</h4>
                    <p class="text-red-700 mt-1">{{ errorMessage }}</p>
                  </div>
                </div>
              }
              @if (successMessage) {
                <!-- Modern Success Message -->
                <div class="mb-8 p-5 bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 text-green-800 rounded-2xl flex items-start shadow-lg animate-in slide-in-from-top-2 duration-300">
                  <div class="flex-shrink-0">
                    <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                      <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                      </svg>
                    </div>
                  </div>
                  <div class="ml-4">
                    <h4 class="font-semibold text-green-800">Success!</h4>
                    <p class="text-green-700 mt-1">{{ successMessage }}</p>
                  </div>
                </div>
              }
              
              <form class="space-y-10" [formGroup]="settingForm" (ngSubmit)="onSubmit()">
                <!-- Section 1: Shop Information -->
                <div class="bg-gradient-to-br from-indigo-50/50 to-purple-50/50 p-8 rounded-2xl border border-indigo-100/50">
                  <div class="flex items-center mb-6">
                    <div class="w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">
                      1
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Shop Information</h3>
                  </div>
              
                  <div class="space-y-8">
                    <!-- Shop Name with Floating Label -->
                    <div class="group relative">
                      <div class="relative">
                        <input
                          type="text"
                          id="shopName"
                          name="shopName"
                          formControlName="shopName"
                          class="peer w-full h-14 px-4 pt-6 pb-2 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all duration-300 bg-white/80 backdrop-blur-sm hover:border-gray-300 placeholder-transparent"
                          placeholder="Enter your shop name"
                        >
                        <label 
                          for="shopName" 
                          class="absolute left-4 top-2 text-xs font-semibold text-indigo-600 transition-all duration-300 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-4 peer-focus:top-2 peer-focus:text-xs peer-focus:text-indigo-600"
                        >
                          Shop Name *
                        </label>
                        <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                          <svg class="h-5 w-5 text-gray-400 peer-focus:text-indigo-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                          </svg>
                        </div>
                      </div>
                      @if(settingForm.get('shopName')?.invalid && settingForm.get('shopName')?.touched) {
                        <div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm flex items-start animate-in slide-in-from-top-1 duration-200">
                          <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                          </svg>
                          <div>
                            @if(settingForm.get('shopName')?.errors?.['required']) { <span class="font-medium">Shop name is required.</span> }
                            @if(settingForm.get('shopName')?.errors?.['server']) { <span class="font-medium">{{settingForm.get('shopName')?.errors?.['server']}}</span> }
                          </div>
                        </div>
                      }
                    </div>

                    <!-- Shop Code with Floating Label -->
                    <div class="group relative">
                      <div class="relative">
                        <input
                          type="text"
                          id="code"
                          name="code"
                          formControlName="code"
                          class="peer w-full h-14 px-4 pt-6 pb-2 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all duration-300 bg-white/80 backdrop-blur-sm hover:border-gray-300 placeholder-transparent"
                          placeholder="Enter shop code (must contain uppercase)"
                        >
                        <label 
                          for="code" 
                          class="absolute left-4 top-2 text-xs font-semibold text-indigo-600 transition-all duration-300 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-4 peer-focus:top-2 peer-focus:text-xs peer-focus:text-indigo-600"
                        >
                          Shop Code *
                        </label>
                        <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                          <svg class="h-5 w-5 text-gray-400 peer-focus:text-indigo-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
                          </svg>
                        </div>
                      </div>
                      @if(settingForm.get('code')?.invalid && settingForm.get('code')?.touched) {
                        <div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm flex items-start animate-in slide-in-from-top-1 duration-200">
                          <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                          </svg>
                          <div>
                            @if(settingForm.get('code')?.errors?.['required']) { <span class="font-medium">Shop code is required.</span> }
                            @if(settingForm.get('code')?.errors?.['noUppercase']) { <span class="font-medium">Must contain at least one uppercase letter.</span> }
                            @if(settingForm.get('code')?.errors?.['server']) { <span class="font-medium">{{settingForm.get('code')?.errors?.['server']}}</span> }
                          </div>
                        </div>
                      }
                    </div>

                    <!-- Logo URL with Floating Label -->
                    <div class="group relative">
                      <div class="relative">
                        <input
                          type="url"
                          id="logoUrl"
                          name="logoUrl"
                          formControlName="logoUrl"
                          class="peer w-full h-14 px-4 pt-6 pb-2 border-2 border-gray-200 rounded-2xl focus:border-indigo-500 focus:outline-none transition-all duration-300 bg-white/80 backdrop-blur-sm hover:border-gray-300 placeholder-transparent"
                          placeholder="https://example.com/logo.png"
                        >
                        <label 
                          for="logoUrl" 
                          class="absolute left-4 top-2 text-xs font-semibold text-indigo-600 transition-all duration-300 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-500 peer-placeholder-shown:top-4 peer-focus:top-2 peer-focus:text-xs peer-focus:text-indigo-600"
                        >
                          Logo URL
                        </label>
                        <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                          <svg class="h-5 w-5 text-gray-400 peer-focus:text-indigo-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                          </svg>
                        </div>
                      </div>
                      @if(settingForm.get('logoUrl')?.invalid && settingForm.get('logoUrl')?.touched) {
                        <div class="mt-3 p-3 bg-red-50 border border-red-200 rounded-xl text-red-600 text-sm flex items-start animate-in slide-in-from-top-1 duration-200">
                          <svg class="w-4 h-4 mr-2 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                          </svg>
                          <div>
                            @if(settingForm.get('logoUrl')?.errors?.['server']) { <span class="font-medium">{{settingForm.get('logoUrl')?.errors?.['server']}}</span> }
                          </div>
                        </div>
                      }
                    </div>
                  </div>
                </div>

                <!-- Section 2: Address Information -->
                <div class="bg-gradient-to-br from-purple-50/50 to-pink-50/50 p-8 rounded-2xl border border-purple-100/50">
                  <div class="flex items-center mb-6">
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">
                      2
                    </div>
                    <h3 class="text-xl font-bold text-gray-800">Address Information</h3>
                  </div>
              
              <div class="p-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Address 1 -->
                  <div class="md:col-span-2">
                    <label for="address" class="block text-sm font-medium text-gray-700 mb-2">Address Line 1</label>
                    <input
                      type="text"
                      id="address"
                      formControlName="address"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter street address"
                    />
                    @if(settingForm.get('address')?.invalid && settingForm.get('address')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('address')?.hasError('server')) {
                          <span>{{ settingForm.get('address')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- Address 2 -->
                  <div class="md:col-span-2">
                    <label for="address2" class="block text-sm font-medium text-gray-700 mb-2">Address Line 2</label>
                    <input
                      type="text"
                      id="address2"
                      formControlName="address2"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Apartment, suite, etc. (optional)"
                    />
                    @if(settingForm.get('address2')?.invalid && settingForm.get('address2')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('address2')?.hasError('server')) {
                          <span>{{ settingForm.get('address2')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- City -->
                  <div>
                    <label for="city" class="block text-sm font-medium text-gray-700 mb-2">City</label>
                    <input
                      type="text"
                      id="city"
                      formControlName="city"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter city"
                    />
                    @if(settingForm.get('city')?.invalid && settingForm.get('city')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('city')?.hasError('server')) {
                          <span>{{ settingForm.get('city')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- State -->
                  <div>
                    <label for="state" class="block text-sm font-medium text-gray-700 mb-2">State</label>
                    <input
                      type="text"
                      id="state"
                      formControlName="state"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter state"
                    />
                    @if(settingForm.get('state')?.invalid && settingForm.get('state')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('state')?.hasError('server')) {
                          <span>{{ settingForm.get('state')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- Country -->
                  <div>
                    <label for="country" class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                    <input
                      type="text"
                      id="country"
                      formControlName="country"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter country"
                    />
                    @if(settingForm.get('country')?.invalid && settingForm.get('country')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('country')?.hasError('server')) {
                          <span>{{ settingForm.get('country')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- Zip Code -->
                  <div>
                    <label for="zipCode" class="block text-sm font-medium text-gray-700 mb-2">Zip Code</label>
                    <input
                      type="text"
                      id="zipCode"
                      formControlName="zipCode"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter zip code"
                    />
                    @if(settingForm.get('zipCode')?.invalid && settingForm.get('zipCode')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('zipCode')?.hasError('server')) {
                          <span>{{ settingForm.get('zipCode')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>
                </div>
              </div>
            </div>

            <!-- Contact Information Section -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
              <div class="bg-gradient-to-r from-green-500 to-green-600 px-6 py-4">
                <h3 class="text-lg font-semibold text-white flex items-center">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                  </svg>
                  Contact Information
                </h3>
                <p class="text-green-100 text-sm mt-1">Contact details for communication</p>
              </div>
              
              <div class="p-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Phone -->
                  <div class="form-group">
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
                    <input
                      type="tel"
                      id="phone"
                      formControlName="phone"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter phone number"
                    />
                    @if(settingForm.get('phone')?.invalid && settingForm.get('phone')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center error-message">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('phone')?.hasError('server')) {
                          <span>{{ settingForm.get('phone')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- Empty space for layout balance -->
                  <div></div>

                  <!-- Email -->
                  <div class="md:col-span-2 form-group">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                    <input
                      type="email"
                      id="email"
                      formControlName="email"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter email address"
                    />
                    @if(settingForm.get('email')?.invalid && settingForm.get('email')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-start error-message">
                        <svg class="w-4 h-4 mr-1 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <div>
                          @if(settingForm.get('email')?.hasError('email')) {
                            <div>Please enter a valid email address</div>
                          }
                          @if(settingForm.get('email')?.hasError('server')) {
                            <div>{{ settingForm.get('email')?.errors?.['server'] }}</div>
                          }
                        </div>
                      </div>
                    }
                  </div>
                </div>
              </div>
            </div>

            <!-- Currency & Business Settings Section -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden form-section-card card-hover">
              <div class="bg-gradient-to-r from-orange-500 to-orange-600 px-6 py-4 section-header">
                <h3 class="text-lg font-semibold text-white flex items-center">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                  </svg>
                  Currency & Business Settings
                </h3>
                <p class="text-orange-100 text-sm mt-1">Currency and business configuration</p>
              </div>
              
              <div class="p-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- Currency -->
                  <div class="form-group">
                    <label for="currency" class="block text-sm font-medium text-gray-700 mb-2">
                      <span class="flex items-center">
                        <svg class="w-4 h-4 mr-1 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                        Currency
                      </span>
                    </label>
                    <select
                      id="currency"
                      formControlName="currency"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                    >
                      <option value="">Select Currency</option>
                      <option value="USD">USD - US Dollar</option>
                      <option value="EUR">EUR - Euro</option>
                      <option value="GBP">GBP - British Pound</option>
                      <option value="INR">INR - Indian Rupee</option>
                      <option value="JPY">JPY - Japanese Yen</option>
                      <option value="AUD">AUD - Australian Dollar</option>
                      <option value="CAD">CAD - Canadian Dollar</option>
                      <option value="CHF">CHF - Swiss Franc</option>
                      <option value="CNY">CNY - Chinese Yuan</option>
                      <option value="SGD">SGD - Singapore Dollar</option>
                    </select>
                    @if(settingForm.get('currency')?.invalid && settingForm.get('currency')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center error-message">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('currency')?.hasError('server')) {
                          <span>{{ settingForm.get('currency')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- Empty space for future business settings -->
                  <div class="form-group">
                    <label class="block text-sm font-medium text-gray-400 mb-2">
                      <span class="flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"></path>
                        </svg>
                        Additional Settings
                      </span>
                    </label>
                    <div class="w-full px-4 py-3 border border-gray-200 rounded-lg bg-gray-50 text-gray-400 text-center">
                      More business settings coming soon
                    </div>
                  </div>
                </div>
                
                <!-- Currency Display Info -->
                <div class="bg-gradient-to-r from-orange-50 to-orange-100 p-4 rounded-lg border border-orange-200">
                  <div class="flex items-start">
                    <svg class="w-5 h-5 text-orange-600 mr-3 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0118 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                    </svg>
                    <div class="text-sm text-orange-800">
                      <p class="font-medium mb-1">Currency Information</p>
                      <p>The selected currency will be used for all pricing, invoices, and financial reports in your POS system. Make sure to select the currency that matches your business location and banking requirements.</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tax Information Section -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
              <div class="bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4">
                <h3 class="text-lg font-semibold text-white flex items-center">
                  <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                  </svg>
                  Tax Information
                </h3>
                <p class="text-purple-100 text-sm mt-1">Tax registration and GST details</p>
              </div>
              
              <div class="p-6 space-y-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <!-- FASSI -->
                  <div>
                    <label for="fassi" class="block text-sm font-medium text-gray-700 mb-2">FASSI</label>
                    <input
                      type="text"
                      id="fassi"
                      formControlName="fassi"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter FASSI number"
                    />
                    @if(settingForm.get('fassi')?.invalid && settingForm.get('fassi')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('fassi')?.hasError('server')) {
                          <span>{{ settingForm.get('fassi')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- GST Number -->
                  <div>
                    <label for="gstNumber" class="block text-sm font-medium text-gray-700 mb-2">GST Number</label>
                    <input
                      type="text"
                      id="gstNumber"
                      formControlName="gstNumber"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="Enter GST registration number"
                    />
                    @if(settingForm.get('gstNumber')?.invalid && settingForm.get('gstNumber')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-center">
                        <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        @if(settingForm.get('gstNumber')?.hasError('server')) {
                          <span>{{ settingForm.get('gstNumber')?.errors?.['server'] }}</span>
                        }
                      </div>
                    }
                  </div>

                  <!-- SGST -->
                  <div>
                    <label for="sgst" class="block text-sm font-medium text-gray-700 mb-2">SGST (%)</label>
                    <input
                      type="number"
                      id="sgst"
                      formControlName="sgst"
                      step="0.01"
                      min="0"
                      max="100"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="0.00"
                    />
                    @if(settingForm.get('sgst')?.invalid && settingForm.get('sgst')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-start">
                        <svg class="w-4 h-4 mr-1 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <div>
                          @if(settingForm.get('sgst')?.hasError('pattern')) {
                            <div>Please enter a valid percentage (e.g., 10.5)</div>
                          }
                          @if(settingForm.get('sgst')?.hasError('server')) {
                            <div>{{ settingForm.get('sgst')?.errors?.['server'] }}</div>
                          }
                        </div>
                      </div>
                    }
                  </div>

                  <!-- CGST -->
                  <div>
                    <label for="cgst" class="block text-sm font-medium text-gray-700 mb-2">CGST (%)</label>
                    <input
                      type="number"
                      id="cgst"
                      formControlName="cgst"
                      step="0.01"
                      min="0"
                      max="100"
                      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 bg-white"
                      placeholder="0.00"
                    />
                    @if(settingForm.get('cgst')?.invalid && settingForm.get('cgst')?.touched) {
                      <div class="text-red-600 text-sm mt-2 flex items-start">
                        <svg class="w-4 h-4 mr-1 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                        </svg>
                        <div>
                          @if(settingForm.get('cgst')?.hasError('pattern')) {
                            <div>Please enter a valid percentage (e.g., 10.5)</div>
                          }
                          @if(settingForm.get('cgst')?.hasError('server')) {
                            <div>{{ settingForm.get('cgst')?.errors?.['server'] }}</div>
                          }
                        </div>
                      </div>
                    }
                  </div>
                </div>
              </div>
            </div>

                <!-- Modern Submit Button -->
                <div class="flex flex-col items-center pt-8 space-y-4">
                  <button
                    type="submit"
                    [disabled]="isSubmitting || settingForm.invalid || !isChangingInfo"
                    class="group relative px-12 py-4 bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white font-bold text-lg rounded-2xl hover:from-indigo-700 hover:via-purple-700 hover:to-pink-700 focus:outline-none focus:ring-4 focus:ring-purple-300 focus:ring-offset-2 disabled:from-gray-300 disabled:via-gray-400 disabled:to-gray-500 disabled:cursor-not-allowed transition-all duration-300 shadow-2xl hover:shadow-purple-500/25 transform hover:scale-105 disabled:transform-none disabled:shadow-none flex items-center min-w-[280px] justify-center"
                  >
                    <div class="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    <div class="relative z-10 flex items-center">
                      @if (!isSubmitting) {
                        <svg class="w-6 h-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                        <span>Save Settings</span>
                        <svg class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                      }
                      @if (isSubmitting) {
                        <svg class="animate-spin -ml-1 mr-3 h-6 w-6 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <span>Saving Settings...</span>
                      }
                    </div>
                  </button>
                  
                  <!-- Form Status Info -->
                  <div class="text-center space-y-3">
                    <div class="flex items-center justify-center space-x-6 text-sm">
                      <!-- Auto-save Status -->
                      <div class="flex items-center" [class]="isChangingInfo ? 'text-orange-600' : 'text-green-600'">
                        <div class="w-2 h-2 rounded-full mr-2 animate-pulse" [class]="isChangingInfo ? 'bg-orange-400' : 'bg-green-400'"></div>
                        <span class="font-medium">{{isChangingInfo ? 'Unsaved Changes' : 'All Saved'}}</span>
                      </div>
                      
                      <!-- Security Badge -->
                      <div class="flex items-center text-gray-500">
                        <svg class="w-4 h-4 mr-2 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
                        </svg>
                        <span class="font-medium">SSL Encrypted</span>
                      </div>
                      
                      <!-- Validation Status -->
                      <div class="flex items-center" [class]="settingForm.valid ? 'text-green-600' : 'text-orange-500'">
                        <svg class="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="settingForm.valid ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z' : 'M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z'"/>
                        </svg>
                        <span class="font-medium">{{settingForm.valid ? 'Form Valid' : 'Check Required Fields'}}</span>
                      </div>
                    </div>
                    
                    <!-- Additional Info -->
                    <p class="text-xs text-gray-400 max-w-md mx-auto">
                      Your shop settings are automatically saved when you submit the form. 
                      All data is encrypted and stored securely in compliance with industry standards.
                    </p>
                  </div>
                </div>
              </form>
            </div>
          </div>
          }
        </div>
      </main>
       
       