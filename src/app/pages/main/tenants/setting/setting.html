<!-- Page Header -->
<div class="bg-white shadow-sm border-b border-gray-200 px-6 py-4">
    <div class="flex items-center justify-between">
        <div>
            <h2 class="text-2xl font-bold text-primary-500">Settings</h2>
            <p class="text-sm text-primary-700 mt-1 hidden sm:block">To update your settings, please fill out the form below.</p>
        </div>
        <div class="flex items-center space-x-3">
        
        </div>
    </div>
</div>
 <!-- Content Area -->
      <main class="p-6">
        <div class="max-w-2xl mx-auto bg-white shadow-lg rounded-lg p-6">
          <!-- Loading Indicator -->
          @if(isLoading) {
            <div class="flex justify-center items-center py-8">
              <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"></div>
              <span class="ml-3 text-primary-600">Loading profile data...</span>
            </div>
          } @else {
          <!-- Error Message -->
           @if(errorMessage) {
                 <div class="mb-4 p-3 bg-warning-100 border border-warning-400 text-warning-700 rounded-lg">
                      {{ errorMessage }}
                  </div>
           }
          @if (successMessage) {
            <!-- Success Message -->
               <div  class="mb-4 p-3 bg-success-100 border border-success-400 text-success-900 rounded-lg">
                {{ successMessage }}
              </div>
          }
        }
        <form class="space-y-6" [formGroup]="settingForm" (ngSubmit)="onSubmit()">
            <!-- Shop Information Section -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Shop Name -->
              <div class="md:col-span-2">
                <label for="shopName" class="block text-sm font-medium text-gray-700 mb-2">Shop Name</label>
                <input
                  type="text"
                  id="shopName"
                  formControlName="shopName"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter shop name"
                />
                @if(settingForm.get('shopName')?.invalid && settingForm.get('shopName')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('shopName')?.hasError('required')) {
                      <span>Shop name is required</span>
                    }
                    @if(settingForm.get('shopName')?.hasError('server')) {
                      <br><span>{{ settingForm.get('shopName')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <div class="md:col-span-2">
                <label for="code" class="block text-sm font-medium text-gray-700 mb-2">Shop Code</label>
                <input
                  type="text"
                  id="code"
                  formControlName="code"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter shop code"
                />
                @if(settingForm.get('code')?.invalid && settingForm.get('code')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                      @if(settingForm.get('code')?.hasError('required')) {
                        <span>Shop code is required</span>
                      }
                      @if(settingForm.get('code')?.hasError('noUppercase')) {
                        <br><span>Must contain at least one uppercase letter</span>
                      }
                      @if(settingForm.get('code')?.hasError('server')) {
                        <br><span>{{ settingForm.get('code')?.errors?.['server'] }}</span>
                      }
                  </div>
                }
              </div>

              <!-- Address 1 -->
              <div class="md:col-span-2">
                <label for="address" class="block text-sm font-medium text-gray-700 mb-2">Address Line 1</label>
                <input
                  type="text"
                  id="address"
                  formControlName="address"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter address line 1"
                />
                @if(settingForm.get('address')?.invalid && settingForm.get('address')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('address')?.hasError('server')) {
                      <span>{{ settingForm.get('address')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Address 2 -->
              <div class="md:col-span-2">
                <label for="address2" class="block text-sm font-medium text-gray-700 mb-2">Address Line 2</label>
                <input
                  type="text"
                  id="address2"
                  formControlName="address2"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter address line 2"
                />
                @if(settingForm.get('address2')?.invalid && settingForm.get('address2')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('address2')?.hasError('server')) {
                      <span>{{ settingForm.get('address2')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- City -->
              <div>
                <label for="city" class="block text-sm font-medium text-gray-700 mb-2">City</label>
                <input
                  type="text"
                  id="city"
                  formControlName="city"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter city"
                />
                @if(settingForm.get('city')?.invalid && settingForm.get('city')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('city')?.hasError('server')) {
                      <span>{{ settingForm.get('city')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- State -->
              <div>
                <label for="state" class="block text-sm font-medium text-gray-700 mb-2">State</label>
                <input
                  type="text"
                  id="state"
                  formControlName="state"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter state"
                />
                @if(settingForm.get('state')?.invalid && settingForm.get('state')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('state')?.hasError('server')) {
                      <span>{{ settingForm.get('state')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Country -->
              <div>
                <label for="country" class="block text-sm font-medium text-gray-700 mb-2">Country</label>
                <input
                  type="text"
                  id="country"
                  formControlName="country"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter country"
                />
                @if(settingForm.get('country')?.invalid && settingForm.get('country')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('country')?.hasError('server')) {
                      <span>{{ settingForm.get('country')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Zip Code -->
              <div>
                <label for="zipCode" class="block text-sm font-medium text-gray-700 mb-2">Zip Code</label>
                <input
                  type="text"
                  id="zipCode"
                  formControlName="zipCode"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter zip code"
                />
                @if(settingForm.get('zipCode')?.invalid && settingForm.get('zipCode')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('zipCode')?.hasError('server')) {
                      <span>{{ settingForm.get('zipCode')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Currency -->
              <div>
                <label for="currency" class="block text-sm font-medium text-gray-700 mb-2">Currency</label>
                <input
                  type="text"
                  id="currency"
                  formControlName="currency"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter currency"
                />
                @if(settingForm.get('currency')?.invalid && settingForm.get('currency')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('currency')?.hasError('server')) {
                      <span>{{ settingForm.get('currency')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Phone -->
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                <input
                  type="tel"
                  id="phone"
                  formControlName="phone"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter phone number"
                />
                @if(settingForm.get('phone')?.invalid && settingForm.get('phone')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('phone')?.hasError('server')) {
                      <span>{{ settingForm.get('phone')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Email -->
              <div class="md:col-span-2">
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter email address"
                />
                @if(settingForm.get('email')?.invalid && settingForm.get('email')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('email')?.hasError('email')) {
                      <span>Please enter a valid email address.</span>
                    }
                    @if(settingForm.get('email')?.hasError('server')) {
                      <br><span>{{ settingForm.get('email')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- Logo URL -->
              <div class="md:col-span-2">
                <label for="logoUrl" class="block text-sm font-medium text-gray-700 mb-2">Logo URL</label>
                <input
                  type="url"
                  id="logoUrl"
                  formControlName="logoUrl"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter logo URL"
                />
                @if(settingForm.get('logoUrl')?.invalid && settingForm.get('logoUrl')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('logoUrl')?.hasError('server')) {
                      <span>{{ settingForm.get('logoUrl')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- FASSI -->
              <div>
                <label for="fassi" class="block text-sm font-medium text-gray-700 mb-2">FASSI</label>
                <input
                  type="text"
                  id="fassi"
                  formControlName="fassi"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter FASSI"
                />
                @if(settingForm.get('fassi')?.invalid && settingForm.get('fassi')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('fassi')?.hasError('server')) {
                      <span>{{ settingForm.get('fassi')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- GST Number -->
              <div>
                <label for="gstNumber" class="block text-sm font-medium text-gray-700 mb-2">GST Number</label>
                <input
                  type="text"
                  id="gstNumber"
                  formControlName="gstNumber"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter GST number"
                />
                @if(settingForm.get('gstNumber')?.invalid && settingForm.get('gstNumber')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('gstNumber')?.hasError('server')) {
                      <span>{{ settingForm.get('gstNumber')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- SGST -->
              <div>
                <label for="sgst" class="block text-sm font-medium text-gray-700 mb-2">SGST (%)</label>
                <input
                  type="number"
                  id="sgst"
                  formControlName="sgst"
                  step="0.01"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter SGST percentage"
                />
                @if(settingForm.get('sgst')?.invalid && settingForm.get('sgst')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('sgst')?.hasError('pattern')) {
                      <span>Please enter a valid percentage (e.g., 10.5)</span>
                    }
                    @if(settingForm.get('sgst')?.hasError('server')) {
                      <br><span>{{ settingForm.get('sgst')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>

              <!-- CGST -->
              <div>
                <label for="cgst" class="block text-sm font-medium text-gray-700 mb-2">CGST (%)</label>
                <input
                  type="number"
                  id="cgst"
                  formControlName="cgst"
                  step="0.01"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  placeholder="Enter CGST percentage"
                />
                @if(settingForm.get('cgst')?.invalid && settingForm.get('cgst')?.touched) {
                  <div class="text-red-500 text-sm mt-1">
                    @if(settingForm.get('cgst')?.hasError('pattern')) {
                      <span>Please enter a valid percentage (e.g., 10.5)</span>
                    }
                    @if(settingForm.get('cgst')?.hasError('server')) {
                      <br><span>{{ settingForm.get('cgst')?.errors?.['server'] }}</span>
                    }
                  </div>
                }
              </div>
            </div>

            <!-- Submit Button -->
            <div class="flex  pt-6">
              <button
                type="submit"
               [disabled]="isLoading || !isChangingInfo || isSubmitting || settingForm.invalid "
                class="px-6 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                {{ isLoading ? 'Saving...' : 'Save Settings' }}
              </button>
            </div>
        </form>
        </div>
    </main>
       